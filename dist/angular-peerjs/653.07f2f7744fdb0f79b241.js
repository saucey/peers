"use strict";(self.webpackChunkangular_peerjs=self.webpackChunkangular_peerjs||[]).push([[653],{653:(O,s,i)=>{i.r(s),i.d(s,{RecieverModule:()=>k});var n=i(8583),u=i(522),a=i(5917),S=i(543),d=i(5435),f=i(3190),v=i(442),e=i(3018),h=i(2238);let g=(()=>{class o{openWebSocketWithPeerID(t){this.webSocket=new WebSocket("ws://localhost:8889"),this.webSocket.onopen=l=>{this.webSocket.send(t)},this.webSocket.onmessage=l=>{},this.webSocket.onclose=l=>{console.log("Close",l)}}sendPeerID(t){this.webSocket.send(JSON.stringify(t))}closeWebSocket(){this.webSocket.close()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var m=i(1095);const C=["localVideo"],b=["remoteVideo"],R=[{path:"",component:(()=>{class o{constructor(t,l,r){this.dialog=t,this.callService=l,this.webSocketService=r,this.isCallStarted$=this.callService.isCallStarted$,this.peerId=this.callService.initPeer(),this.webSocketService.openWebSocketWithPeerID(this.peerId),this.callService.setPeerID(this.peerId),this.callService.enableCallAnswer()}ngOnInit(){this.callService.localStream$.pipe((0,d.h)(t=>!!t)).subscribe(t=>this.localVideo.nativeElement.srcObject=t),this.callService.remoteStream$.pipe((0,d.h)(t=>!!t)).subscribe(t=>this.remoteVideo.nativeElement.srcObject=t)}ngOnDestroy(){this.callService.destroyPeer(),this.webSocketService.closeWebSocket()}showModal(t){this.dialog.open(S.E,{width:"250px",data:t?{peerId:null,joinCall:!0}:{peerId:this.peerId,joinCall:!1}}).afterClosed().pipe((0,f.w)(p=>(0,a.of)(t?this.callService.establishMediaCall(p):this.callService.enableCallAnswer()))).subscribe(p=>{})}endCall(){this.callService.closeMediaCall()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.uw),e.Y36(v.M),e.Y36(g))},o.\u0275cmp=e.Xpm({type:o,selectors:[["reciever"]],viewQuery:function(t,l){if(1&t&&(e.Gf(C,5),e.Gf(b,5)),2&t){let r;e.iGM(r=e.CRH())&&(l.localVideo=r.first),e.iGM(r=e.CRH())&&(l.remoteVideo=r.first)}},features:[e._Bn([v.M])],decls:12,vars:4,consts:[[1,"container"],["mat-raised-button","","color","warn",1,"m-2",3,"disabled","click"],[1,"row"],[1,"col","text-center"],["id","video-wrapper"],["id","remote-video","autoplay","","playsinline",""],["remoteVideo",""],["id","local-video","autoplay","","playsinline","",3,"muted"],["localVideo",""]],template:function(t,l){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div"),e.TgZ(2,"button",1),e.NdJ("click",function(){return l.endCall()}),e.ALo(3,"async"),e._uU(4,"End Call"),e.qZA(),e.qZA(),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"div",4),e._UZ(8,"video",5,6),e._UZ(10,"video",7,8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("disabled",!e.lcZ(3,2,l.isCallStarted$)),e.xp6(8),e.Q6J("muted",!0))},directives:[m.lW],pipes:[n.Ov],styles:["#video-wrapper[_ngcontent-%COMP%]{text-align:center;background-color:#343434;border-radius:4px}#remote-video[_ngcontent-%COMP%]{max-width:100%;max-height:90vh;border-radius:4px}#local-video[_ngcontent-%COMP%]{z-index:1;position:absolute;right:10px;bottom:10px;width:100%;height:10vw;max-width:10rem;max-height:10rem;border:4px solid white}"]}),o})()}];let y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[n.ez,u.Bz.forChild(R)]]}),o})();var M=i(665),w=i(8295),Z=i(9983),I=i(4785),x=i(6458),A=i(894),W=i(1841);let k=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[],imports:[[y,M.u5,m.ot,h.Is,w.lN,Z.c,I.Iq,x.ZX,A.B,n.ez,W.JF]]}),o})()}}]);