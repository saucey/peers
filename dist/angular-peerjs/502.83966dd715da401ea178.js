"use strict";(self.webpackChunkangular_peerjs=self.webpackChunkangular_peerjs||[]).push([[502],{3502:(P,d,o)=>{o.r(d),o.d(d,{SenderModule:()=>R});var a=o(8583),p=o(522),s=o(5917),f=o(543),c=o(5435),S=o(3190),m=o(442),e=o(3018),v=o(2238),u=o(1095);const g=["localVideo"],C=["remoteVideo"],M=[{path:"",component:(()=>{class l{constructor(t,i){this.dialog=t,this.callService=i,this.isCallStarted$=this.callService.isCallStarted$,this.peerId=this.callService.initPeer(),this.callService.getPeerId().subscribe(n=>{this.serverPeerId=n.peerID})}ngOnInit(){this.callService.localStream$.pipe((0,c.h)(t=>!!t)).subscribe(t=>this.localVideo.nativeElement.srcObject=t),this.callService.remoteStream$.pipe((0,c.h)(t=>!!t)).subscribe(t=>this.remoteVideo.nativeElement.srcObject=t)}ngOnDestroy(){this.callService.destroyPeer()}makeCall(){this.callService.establishMediaCall(this.serverPeerId)}showModal(t){this.dialog.open(f.E,{width:"250px",data:t?{peerId:null,joinCall:!0}:{peerId:this.peerId,joinCall:!1}}).afterClosed().pipe((0,S.w)(h=>(0,s.of)(t?this.callService.establishMediaCall(h):this.callService.enableCallAnswer()))).subscribe(h=>{})}endCall(){this.callService.closeMediaCall()}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(v.uw),e.Y36(m.M))},l.\u0275cmp=e.Xpm({type:l,selectors:[["sender"]],viewQuery:function(t,i){if(1&t&&(e.Gf(g,5),e.Gf(C,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.localVideo=n.first),e.iGM(n=e.CRH())&&(i.remoteVideo=n.first)}},features:[e._Bn([m.M])],decls:14,vars:4,consts:[[1,"container"],["mat-raised-button","","color","primary",1,"m-2",3,"click"],["mat-raised-button","","color","warn",1,"m-2",3,"disabled","click"],[1,"row"],[1,"col","text-center"],["id","video-wrapper"],["id","remote-video","autoplay","","playsinline",""],["remoteVideo",""],["id","local-video","autoplay","","playsinline","",3,"muted"],["localVideo",""]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div"),e.TgZ(2,"button",1),e.NdJ("click",function(){return i.makeCall()}),e._uU(3,"Start Call"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return i.endCall()}),e.ALo(5,"async"),e._uU(6,"End Call"),e.qZA(),e.qZA(),e.TgZ(7,"div",3),e.TgZ(8,"div",4),e.TgZ(9,"div",5),e._UZ(10,"video",6,7),e._UZ(12,"video",8,9),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("disabled",!e.lcZ(5,2,i.isCallStarted$)),e.xp6(8),e.Q6J("muted",!0))},directives:[u.lW],pipes:[a.Ov],styles:["#video-wrapper[_ngcontent-%COMP%]{text-align:center;background-color:#343434;border-radius:4px}#remote-video[_ngcontent-%COMP%]{max-width:100%;max-height:90vh;border-radius:4px}#local-video[_ngcontent-%COMP%]{z-index:1;position:absolute;right:10px;bottom:10px;width:100%;height:10vw;max-width:10rem;max-height:10rem;border:4px solid white}"]}),l})()}];let Z=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({imports:[[a.ez,p.Bz.forChild(M)]]}),l})();var y=o(665),b=o(8295),I=o(9983),x=o(4785),A=o(6458),T=o(894),O=o(1841);let R=(()=>{class l{}return l.\u0275fac=function(t){return new(t||l)},l.\u0275mod=e.oAB({type:l}),l.\u0275inj=e.cJS({providers:[],imports:[[Z,y.u5,u.ot,v.Is,b.lN,I.c,x.Iq,A.ZX,T.B,a.ez,O.JF]]}),l})()}}]);